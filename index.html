<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Book a Slot</title>

<!-- Calendly styles are harmless if not used -->
<link rel="stylesheet" href="https://assets.calendly.com/assets/external/widget.css">

<style>
  :root{
    /* ====== BRAND (edit these) ====== */
    --bg:#0b0f1a;
    --surface:#131a2a;
    --border:#202a44;
    --text:#e9eef7;
    --muted:#a8b2c3;
    --brand:#4c7ef3;
  }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--text);font:16px/1.5 system-ui,Segoe UI,Roboto,Arial}
  header{padding:16px 18px;background:#0e1424;border-bottom:1px solid var(--border)}
  .container{max-width:1000px;margin:0 auto;padding:0 16px}
  .brand{display:flex;align-items:center;gap:10px}
  .brand img{height:36px}
  .brand span{font-weight:600}
  main{padding:24px 0}
  .card{background:var(--surface);border:1px solid var(--border);border-radius:14px;padding:18px}
  h1{font-size:1.25rem;margin:0 0 8px}
  p.lead{margin:0 0 16px;color:var(--muted)}
  .hint{font-size:.9rem;color:var(--muted);margin-top:10px}
  .embed-wrap{margin-top:8px}
  iframe{width:100%;height:900px;border:0;border-radius:10px;background:#fff}
  .note{font-size:.9rem;color:var(--muted);margin-top:14px}
  footer{color:var(--muted);text-align:center;padding:22px}
  .badge{display:inline-block;background:var(--brand);color:#fff;padding:4px 8px;border-radius:999px;font-size:.75rem}
  .alert{border:1px solid #5c2a2a;background:#2a1414;color:#ffdede;padding:10px 12px;border-radius:10px;margin:12px 0}
  @media (max-width:640px){ iframe{height:1000px} }
</style>
</head>
<body>

<header>
  <div class="container">
    <div class="brand">
      <img id="logo" src="./logo.png" alt="Logo">
      <span id="brandName">Bookings</span>
      <span class="badge" style="margin-left:auto">Jim Caputo's Appointment Page</span>
    </div>
  </div>
</header>

<main class="container">
  <div class="card">
    <h1 id="headline">Book a time</h1>
    <p class="lead" id="subhead">Select a time below. You’ll receive an email confirmation with an .ics calendar file that works with Google, Apple, and Outlook.</p>

    <div id="warning" class="alert" style="display:none"></div>

    <!-- The booking widget is injected here -->
    <div id="bookingMount" class="embed-wrap"></div>

    <div class="note">
      We use your info only to schedule your appointment. You and we both receive a confirmation email.
    </div>
  </div>
</main>

<footer class="container">
  © <span id="year"></span> <span id="brandFoot">Your Business</span>. All rights reserved.
</footer>

<!-- Calendly script (safe to include even if not used) -->
<script src="https://assets.calendly.com/assets/external/widget.js" async></script>

<script>
/**
 * ===================== CONFIG =====================
 * Choose ONE provider and paste its URL:
 *  - provider: 'calendly'  OR  'google'
 *  - url:
 *      Calendly example: https://calendly.com/YOUR-ORG/YOUR-EVENT?hide_gdpr_banner=1
 *      Google Appointment Schedule embed URL (from Google Calendar > Booking pages > Sharing options > Website embed)
 *  - logo: your logo URL
 *  - brandName: your business name (shown in header/footer)
 */
const BOOKING = {
  provider: 'google', // 'google' or 'calendly'
  url: 'https://calendar.google.com/calendar/appointments/schedules/AcZssZ048SpHccFi8IG2aTAy_wkgr70Vc9eNIqCOo8_NUf9Som8f2ATlD0jTbc8r6SoZ920j3XtBfn4Z?gv=true', // or your Calendly event URL
  logo: '/logo.png', // optional logo URL
  brandName: 'Your Business'
};
/* ================================================== */

(function initBrand(){
  document.getElementById('logo').src = BOOKING.logo || document.getElementById('logo').src;
  document.getElementById('brandName').textContent = BOOKING.brandName || 'Bookings';
  document.getElementById('brandFoot').textContent = BOOKING.brandName || 'Your Business';
  document.getElementById('year').textContent = new Date().getFullYear();
})();

function mountCalendly(mount, url){
  // Create Calendly inline widget container
  const div = document.createElement('div');
  div.className = 'calendly-inline-widget';
  div.setAttribute('data-url', url);
  div.style.minWidth = '320px';
  div.style.height = '820px';
  mount.appendChild(div);

  // Ensure Calendly script initializes if it loaded before DOM injection
  if (window.Calendly && typeof window.Calendly.initInlineWidgets === 'function') {
    window.Calendly.initInlineWidgets();
  }
}

function mountGoogleEmbed(mount, url){
  const iframe = document.createElement('iframe');
  iframe.src = url;
  iframe.loading = 'eager';
  iframe.referrerPolicy = 'no-referrer-when-downgrade';
  mount.appendChild(iframe);
}

(function main(){
  const mount = document.getElementById('bookingMount');
  const warn  = document.getElementById('warning');

  if (!BOOKING || !BOOKING.provider || !BOOKING.url || BOOKING.url.includes('YOUR_GOOGLE_BOOKING_PAGE_EMBED_URL')) {
    warn.style.display = '';
    warn.textContent = 'Setup required: Set BOOKING.provider to "google" or "calendly" and paste your booking URL in the BOOKING.url field at the top of this file.';
    return;
  }

  const provider = String(BOOKING.provider).toLowerCase();
  if (provider === 'calendly') {
    mountCalendly(mount, BOOKING.url);
  } else if (provider === 'google') {
    mountGoogleEmbed(mount, BOOKING.url);
  } else {
    warn.style.display = '';
    warn.textContent = 'Unsupported provider. Use "google" or "calendly".';
  }
})();
</script>
</body>
</html>
